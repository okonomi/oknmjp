---
layout: "../../layouts/BlogPost.astro"
title: "画像アップロードできるようにした"
pubDate: "2020-04-20 13:02"
tags:
  - ブログ開発日記
---
<action-text-attachment sgid="BAh7CEkiCGdpZAY6BkVUSSIvZ2lkOi8vYmxnL0FjdGl2ZVN0b3JhZ2U6OkJsb2IvMj9leHBpcmVzX2luBjsAVEkiDHB1cnBvc2UGOwBUSSIPYXR0YWNoYWJsZQY7AFRJIg9leHBpcmVzX2F0BjsAVDA=--dab412702704521b2d59307608a783c546ca9dc8" content-type="image/jpeg" url="http://oknm.jp/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBCdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--24a4273fa10163ea2301f6d59a205b716e2faa39/glenn-carstens-peters-npxXWgQ33ZQ-unsplash.jpg" filename="glenn-carstens-peters-npxXWgQ33ZQ-unsplash.jpg" filesize="620556" width="4076" height="2712" previewable="true" presentation="gallery" caption="Photo by Glenn Carstens-Peters on Unsplash"><figure class="attachment attachment--preview">
  <img width="4076" height="2712" src="http://oknm.jp/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBCdz09IiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--24a4273fa10163ea2301f6d59a205b716e2faa39/glenn-carstens-peters-npxXWgQ33ZQ-unsplash.jpg">
    <figcaption class="attachment__caption">
      Photo by Glenn Carstens-Peters on Unsplash
    </figcaption>
</figure></action-text-attachment>

重い腰を上げて画像をアップロードできるようにした。
S3やCloud Storageも考えたけど、Herokuのadd-onがあって手軽そうだったのでCloudinaryにした。
Herokuのコンソールでadd-onをインストールして、[ドキュメント](https://cloudinary.com/documentation/rails_integration)のとおりActiveStorageの設定を有効にしたらあっさりアップロードできた。
やってみれば簡単だった。
